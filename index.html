<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Specialist | Elite Strategic Suite</title>
    <!-- Script Inti: Tailwind, Lucide Icons, Marked.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --gold: #D4AF37;
            --gold-bright: #FACC15;
            --dark-bg: #000000;
            --zinc-bright: #ffffff;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--dark-bg);
            color: var(--zinc-bright);
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .luxury-font { font-family: 'Playfair Display', serif; }

        /* Neural Preloader */
        #neural-preloader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease;
        }

        .loader-ring {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(250, 204, 21, 0.1);
            border-top: 3px solid var(--gold-bright);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        .glass-card {
            background: rgba(18, 18, 18, 0.98);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(250, 204, 21, 0.2);
            border-radius: 1.25rem;
        }

        .gold-gradient {
            background: linear-gradient(135deg, #FFF7AD 0%, #FACC15 50%, #D4AF37 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .neural-btn {
            background: linear-gradient(135deg, #FACC15 0%, #D4AF37 100%);
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            color: #000;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 900;
        }

        .neural-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(250, 204, 21, 0.5);
        }

        .nav-item.active {
            background: linear-gradient(to right, rgba(250, 204, 21, 0.15), transparent);
            border-left: 4px solid var(--gold-bright);
            color: var(--gold-bright);
        }

        .nav-item:hover:not(.active) {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.05);
        }

        /* Format Teks Justified untuk CEO */
        .prose { 
            max-width: 100%; 
            font-size: 1.1rem; 
            line-height: 1.9; 
            color: #ffffff; 
            text-align: justify; 
            text-justify: inter-word;
        }
        .prose h1, .prose h2, .prose h3 { 
            font-family: 'Playfair Display', serif; 
            color: var(--gold-bright); 
            margin-top: 2.5rem; 
            font-weight: 800; 
            text-align: left; 
        }
        .prose table { border: 1px solid #444; width: 100%; border-collapse: collapse; margin: 2rem 0; background: rgba(20, 20, 20, 0.8); }
        .prose th { background: #1a1a1a; color: var(--gold-bright); padding: 1rem; text-align: left; border: 1px solid #444; font-weight: 700; }
        .prose td { border: 1px solid #444; padding: 1rem; color: #ffffff; vertical-align: top; }
        .prose strong { color: #FACC15; font-weight: 800; }
        .prose ul, .prose ol { padding-left: 1.5rem; margin-bottom: 1.5rem; }
        .prose li { margin-bottom: 0.75rem; }

        input, textarea, select {
            color: #ffffff !important;
            background-color: #0a0a0a !important;
            border: 1px solid #333 !important;
            outline: none;
            width: 100%;
        }

        input:focus, textarea:focus, select:focus {
            border-color: var(--gold-bright) !important;
            box-shadow: 0 0 15px rgba(250, 204, 21, 0.1);
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--gold-bright); border-radius: 10px; }

        .hidden-element { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-in forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .scroll-zone {
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        select option { background-color: #000; color: #fff; }
    </style>
</head>
<body class="min-h-screen">

    <!-- Preloader -->
    <div id="neural-preloader">
        <div class="loader-ring mb-6"></div>
        <p class="luxury-font text-2xl gold-gradient italic font-bold">Social Media Specialist</p>
        <p class="text-[9px] text-zinc-500 tracking-[0.5em] uppercase mt-2">Elite Strategic Engine v2.4</p>
    </div>

    <!-- Gerbang Masuk (API Gateway) -->
    <div id="api-gate" class="min-h-screen flex items-center justify-center p-6 bg-black relative overflow-hidden">
        <div class="absolute top-[-10%] right-[-10%] w-[40%] h-[40%] bg-amber-500/5 blur-[120px] rounded-full"></div>
        <div class="absolute bottom-[-10%] left-[-10%] w-[40%] h-[40%] bg-amber-500/5 blur-[120px] rounded-full"></div>

        <div class="glass-card p-10 w-full max-w-lg z-10 border-amber-500/20 shadow-2xl text-white">
            <div class="text-center mb-10">
                <h1 class="luxury-font text-3xl font-bold gold-gradient italic mb-1 uppercase tracking-tight">Social Specialist</h1>
                <h2 class="text-zinc-500 text-[10px] uppercase tracking-[0.4em] font-black mb-10">Elite Strategic Suite</h2>
            </div>

            <div class="space-y-6">
                <div class="relative">
                    <label class="block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3">Google AI Studio API Key</label>
                    <input type="password" id="input-gate-key" class="px-6 py-5 rounded-2xl font-mono tracking-widest text-lg" placeholder="AIzaSy...">
                    <button onclick="window.toggleTutorial()" class="absolute right-4 top-[45px] text-[10px] text-amber-500 border border-amber-500/30 px-3 py-1.5 rounded-full hover:bg-amber-500/10 transition-all font-bold uppercase">Tutorial</button>
                </div>

                <div id="api-tutorial" class="hidden-element p-6 bg-zinc-950 border border-zinc-800 rounded-xl mb-4">
                    <h3 class="luxury-font text-amber-400 text-lg mb-3">Langkah Aktivasi:</h3>
                    <ol class="text-zinc-300 text-sm space-y-2 list-decimal pl-5 font-medium">
                        <li>Buka <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-amber-500 underline font-bold">Google AI Studio (Klik)</a>.</li>
                        <li>Pilih <strong>"Create API Key in new project"</strong>.</li>
                        <li>Salin kode panjang yang muncul.</li>
                        <li>Tempelkan pada kolom di atas dan klik tombol di bawah.</li>
                    </ol>
                </div>

                <button onclick="window.unlockSystem()" id="btn-unlock" class="neural-btn w-full py-6 rounded-2xl font-black text-sm uppercase tracking-widest flex items-center justify-center gap-3">
                    <i data-lucide="shield-check" class="w-5 h-5"></i>
                    Buka Dashboard Elit
                </button>
            </div>

            <p id="gate-error" class="text-red-500 text-xs mt-6 italic hidden-element text-center font-bold"></p>

            <div class="mt-12 text-center">
                <p class="text-zinc-100 text-xl tracking-[0.2em]"><strong>Made by ProSbe</strong></p>
            </div>
        </div>
    </div>

    <!-- Interface Dashboard -->
    <div id="main-wrapper" class="min-h-screen flex flex-col md:flex-row overflow-hidden hidden-element fade-in">
        <!-- Navigasi Samping -->
        <aside class="w-full md:w-64 border-r border-zinc-900 bg-black flex-shrink-0 z-30 flex flex-col h-screen sticky top-0">
            <div class="p-8 text-center border-b border-zinc-900">
                <h1 class="luxury-font text-2xl font-bold gold-gradient italic tracking-tighter">Social Specialist</h1>
                <p class="text-[8px] text-zinc-500 tracking-[0.4em] uppercase mt-2 font-black">Professional Elite Hub</p>
            </div>
            
            <nav class="flex-1 px-3 pb-10 overflow-y-auto" id="sidebar-nav"></nav>

            <div class="p-5 border-t border-zinc-900 space-y-3">
                <button onclick="window.lockSystem()" class="w-full py-3 rounded-lg border border-red-900/30 text-red-500/70 text-[9px] font-bold uppercase hover:bg-red-500/10 transition-all flex items-center justify-center gap-2">
                    <i data-lucide="trash-2" class="w-3 h-3"></i> Hapus API Key & Logout
                </button>
                <div class="text-center">
                    <span class="text-[9px] text-zinc-700 font-bold tracking-[0.3em]">PROSBE CORE v2.4</span>
                </div>
            </div>
        </aside>

        <!-- Area Kerja Utama -->
        <main class="flex-1 flex flex-col relative h-screen bg-black">
            <header class="h-20 border-b border-zinc-900 flex items-center justify-between px-8 md:px-12 backdrop-blur-3xl sticky top-0 z-20">
                <div class="flex items-center gap-4">
                    <div class="w-2 h-2 bg-amber-400 rounded-full animate-pulse shadow-[0_0_10px_#facc15]"></div>
                    <div>
                        <h2 id="active-tool-title" class="luxury-font text-lg md:text-xl font-bold text-white tracking-tight italic">Dashboard</h2>
                        <p id="active-tool-desc" class="text-[9px] text-zinc-400 uppercase tracking-widest font-bold">Neural Engine Active</p>
                    </div>
                </div>
                <div class="h-10 w-10 rounded-full border border-zinc-800 flex items-center justify-center bg-zinc-950">
                    <i data-lucide="cpu" class="w-4 h-4 text-amber-500"></i>
                </div>
            </header>

            <div class="flex-1 scroll-zone p-4 md:p-12" id="main-scroll-area">
                <div class="max-w-4xl mx-auto pb-20">
                    <div id="tool-interface" class="glass-card p-8 md:p-14 shadow-2xl"></div>
                    
                    <!-- Area Hasil Analisa -->
                    <div id="result-container" class="mt-12 hidden-element fade-in">
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                            <div class="flex items-center gap-3">
                                <div class="h-8 w-1 bg-amber-400 rounded-full shadow-[0_0_10px_rgba(250,204,21,0.6)]"></div>
                                <h3 class="luxury-font text-2xl text-white font-bold italic">Hasil Laporan Elit</h3>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="window.exportToWord()" class="px-6 py-3 rounded-full border border-amber-500/40 bg-amber-500/10 hover:bg-amber-500/20 text-amber-400 text-[10px] font-black uppercase flex items-center gap-2"><i data-lucide="file-text" class="w-4 h-4"></i> Simpan Word</button>
                                <button onclick="window.copyResult()" class="px-6 py-3 rounded-full border border-zinc-700 bg-zinc-900 hover:bg-zinc-800 text-zinc-100 text-[10px] font-black uppercase flex items-center gap-2"><i data-lucide="copy" class="w-4 h-4"></i> Salin Teks</button>
                            </div>
                        </div>
                        <div id="result-content" class="glass-card p-10 md:p-16 prose max-w-none border-t-4 border-amber-400/50 shadow-inner"></div>
                    </div>
                </div>
            </div>

            <!-- Notifikasi Sistem -->
            <div id="notification" class="fixed bottom-10 right-10 glass-card px-8 py-4 transform translate-y-40 opacity-0 transition-all duration-700 border-amber-400 shadow-2xl flex items-center gap-4 z-50">
                <div id="notif-icon-box" class="p-2 bg-amber-400/20 rounded-full"><i data-lucide="shield-check" class="w-4 h-4 text-amber-400"></i></div>
                <span id="notification-text" class="text-[10px] font-bold uppercase tracking-widest text-white"></span>
            </div>
        </main>
    </div>

    <!-- Script Utama -->
    <script>
        window.geminiApiKey = "";
        let isLoadingAI = false;

        // DATA 14 MODUL ELIT DENGAN DESKRIPSI DETAIL
        const toolCategories = [
            {
                name: "Strategic Brain",
                tools: [
                    {
                        id: 'neural-planner', icon: 'cpu', name: 'Neural Campaign',
                        desc: 'Rencana kerja 30 hari otomatis. Sistem mengatur jadwal kapan Anda harus jualan, mengedukasi, dan membuat konten viral agar akun Anda terlihat profesional dan sangat terpercaya.',
                        inputs: [
                            { id: 'brand_n', label: 'Nama Bisnis / Brand Anda', placeholder: 'e.g. Toko Kue Lapis Legit atau Skincare Premium' },
                            { id: 'goal_n', label: 'Tujuan Strategis Bulan Ini', type: 'select', options: [
                                'Pertumbuhan Viral & Jangkauan Masif', 'Fokus Jualan & Konversi Tinggi', 'Membangun Pengikut Fanatik',
                                'Menjadi Ahli Terpercaya di Bidang Anda', 'Meningkatkan Kesadaran Merek', 'Mencari Calon Pembeli (Leads)',
                                'Promosi Produk Baru', 'Meningkatkan Loyalitas Pelanggan', 'Mencari Klien Kelas Atas (Mewah)'
                            ]}
                        ],
                        prompt: (data) => `Buat strategi kampanye 30 hari untuk "${data.brand_n}" dengan goal "${data.goal_n}". Berikan solusi 'Super Daging'.`
                    },
                    {
                        id: 'shadow-audit', icon: 'eye', name: 'Shadow Auditor',
                        desc: 'Fitur detektif untuk membedah kelemahan kompetitor. Temukan di mana mereka gagal (misal: pelayanan buruk atau konten kaku) supaya Anda bisa merebut audiens mereka.',
                        inputs: [{ id: 'comp_data', label: 'Konteks Kompetitor', type: 'textarea', placeholder: 'e.g. Akun @pesaing sering posting tips tapi interaksinya sepi dan banyak komplain...' }],
                        prompt: (data) => `Analisa kompetitor: "${data.comp_data}". Temukan 3 celah fatal dan langkah Shadow Strategy.`
                    }
                ]
            },
            {
                name: "Elite Creation",
                tools: [
                    {
                        id: 'content-strategist', icon: 'calendar', name: '30-Day Calendar',
                        desc: 'Kalender konten harian yang seimbang. Anda tidak perlu bingung "hari ini posting apa?". Kami atur porsi promosi dan hiburan secara otomatis.',
                        inputs: [{ id: 'niche_c', label: 'Bidang Usaha Anda', placeholder: 'e.g. Klinik Kecantikan atau Jasa Desain' }],
                        prompt: (data) => `Buat kalender konten harian untuk "${data.niche_c}" lengkap dengan porsi Edukasi, Sales, dan Engagement.`
                    },
                    {
                        id: 'script-pro', icon: 'film', name: 'Script Architect',
                        desc: 'Penulis naskah video otomatis untuk TikTok/Reels. Lengkap dengan arahan gaya visualnya agar video terlihat mahal, sinematik, dan profesional.',
                        inputs: [
                            { id: 's_topic', label: 'Topik Utama Video', placeholder: 'e.g. 3 Rahasia Kopi Enak ala Barista' },
                            { id: 's_aura', label: 'Gaya Visual Video', type: 'select', options: [
                                'Mewah, Gelap & Misterius (Dark Luxury)', 'Gaya Masa Depan / Cyber-Punk', 'Estetik Bersih & Minimalis',
                                'Sinematik Hiper-Realis', 'Nostalgia Jadul (Vintage)', 'Gaya Elegan Klasik (Old Money)'
                            ]}
                        ],
                        prompt: (data) => `Buat script video vertikal tentang "${data.s_topic}" dengan aura "${data.s_aura}".`
                    },
                    {
                        id: 'voice-pro', icon: 'mic-2', name: 'Voice Transmuter',
                        desc: 'Ubah tulisan kaku menjadi kalimat yang punya wibawa. Menyuplap teks biasa menjadi narasi yang memancarkan karisma seorang pemimpin atau ahli.',
                        inputs: [
                            { id: 'v_raw', label: 'Draft Konten Anda', type: 'textarea', placeholder: 'Tempel tulisan Anda yang masih kaku di sini...' },
                            { id: 'v_aura', label: 'Pilih Karakter Persona', type: 'select', options: [
                                'Alfa Dominan (Tegas)', 'Mewah Senyap (Elegan)', 'Intelek Cerdas (Pintar)', 'Gaya Viral (Gen-Z)'
                            ]}
                        ],
                        prompt: (data) => `Rewrite teks: "${data.v_raw}" dengan persona "${data.v_aura}". Jadikan sangat berbobot.`
                    },
                    {
                        id: 'design-brief', icon: 'palette', name: 'Canva Design Brief',
                        desc: 'Instruksi visual khusus untuk desain. Gunakan panduan ini di Canva atau berikan ke desainer Anda agar tampilan brand terlihat seperti buatan agensi internasional.',
                        inputs: [{ id: 'd_topic', label: 'Topik Seri Konten', placeholder: 'e.g. 10 Tips Investasi Saham' }],
                        prompt: (data) => `Buat design brief 10 slide Instagram tentang "${data.d_topic}".`
                    }
                ]
            },
            {
                name: "Algorithm Hack",
                tools: [
                    { id: 'hook-gen', icon: 'zap', name: 'Viral Hooks', desc: '15 Kalimat pembuka sakti. Gunanya agar orang berhenti scrolling dan mulai menonton konten Anda di 1,5 detik pertama.', inputs: [{ id: 'h_topic', label: 'Topik Konten', placeholder: 'e.g. Cara Langsing Tanpa Lapar' }], prompt: (data) => `Buat 15 hook viral untuk "${data.h_topic}".` },
                    { id: 'hashtag-master', icon: 'hash', name: 'Hashtag Architect', desc: 'Hashtag yang sedang ramai dan sesuai niche. Agar konten Anda ditemukan oleh orang baru di luar pengikut lama.', inputs: [{ id: 'n_h', label: 'Bidang Bisnis', placeholder: 'e.g. Kuliner Nusantara' }], prompt: (data) => `Generate 20 hashtag viral niche "${data.n_h}".` },
                    { id: 'seo-nav', icon: 'navigation', name: 'SEO Navigator', desc: 'Siasat agar video Anda muncul paling atas di pencarian TikTok/Instagram saat orang mengetik kata kunci tertentu.', inputs: [{ id: 'kw', label: 'Kata Kunci Yang Mau Dikuasai', placeholder: 'e.g. Tutorial Bisnis Online' }], prompt: (data) => `Strategi SEO Social untuk keywords "${data.kw}".` },
                    { id: 'scheduling', icon: 'clock', name: 'Golden Schedule', desc: 'Jam posting terbaik. Kami hitungkan waktu saat audiens Anda sedang aktif menggunakan HP agar postingan langsung ramai.', inputs: [{ id: 'reg', label: 'Target Lokasi (Zona Waktu)', placeholder: 'e.g. Jakarta (WIB)' }, { id: 'v_freq', label: 'Ingin Posting Seberapa Sering?', type: 'select', options: ['Konsisten (1x Sehari)', 'Agresif (3x Sehari)', 'Mengejar Momentum Viral'] }], prompt: (data) => `Rancang jadwal harian di "${data.reg}" intensitas "${data.v_freq}".` }
                ]
            },
            {
                name: "Growth Mastery",
                tools: [
                    { id: 'perf-audit', icon: 'bar-chart-2', name: 'Deep Audit', desc: 'Bedah tuntas akun Anda. Kami analisa mengapa konten Anda sepi dan memberikan langkah perbaikan yang tajam.', inputs: [{ id: 'a_data', label: 'Statistik Konten Terakhir', type: 'textarea', placeholder: 'Paste hasil views, like, share terakhir...' }], prompt: (data) => `Audit 'Super Daging' pada data: "${data.a_data}".` },
                    { id: 'psych-trigger', icon: 'brain', name: 'Psychology Lab', desc: 'Trik psikologi jualan. Menambahkan efek "takut ketinggalan" (FOMO) atau "rasa percaya" agar calon pembeli lebih cepat melakukan transfer.', inputs: [
                        { id: 'p_base', label: 'Ide Jualan Anda', type: 'textarea', placeholder: 'e.g. Promo diskon 50% hanya hari ini' }, 
                        { id: 'p_type', label: 'Pilih Efek Psikologi', type: 'select', options: ['FOMO (Urgensi)', 'Otoritas (Ahli)', 'Kelangkaan (Terbatas)', 'Social Proof (Testimoni)'] }
                    ], prompt: (data) => `Suntikkan trigger "${data.p_type}" ke konten: "${data.p_base}".` },
                    { id: 'crisis-mgmt', icon: 'alert-triangle', name: 'Crisis Control', desc: 'Cara mengatasi drama atau komentar buruk. Menjaga reputasi bisnis Anda agar tetap bersih di mata publik meskipun ada masalah.', inputs: [{ id: 'crisis_p', label: 'Ceritakan Masalah (Skenario)', type: 'textarea', placeholder: 'e.g. Ada konsumen komplain di Reels layanan hotel kita buruk dan viral...' }], prompt: (data) => `Strategi menangani krisis: "${data.crisis_p}".` },
                    { id: 'cult-builder', icon: 'users', name: 'Community Cult', desc: 'Cara mengubah pengikut biasa menjadi fans fanatik yang selalu membela dan membeli apapun yang Anda luncurkan.', inputs: [{ id: 'ess', label: 'Nilai Utama Brand', placeholder: 'e.g. Pemberdayaan atau Solusi Hemat' }], prompt: (data) => `Rancang strategi membangun komunitas bagi "${data.ess}".` }
                ]
            }
        ];

        // FUNGSI INJEKSI: callGeminiAI dengan Penanganan Quota 429
        const callGeminiAI = async (prompt, apiKey) => {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }],
                    systemInstruction: { 
                        parts: [{ text: "Kamu adalah Supreme Social Media Intelligence 2026. ANALISIS: Tajam. SOLUSI: Super Daging. GAYA: LuxuryCore 2026. FORMAT: Markdown rapi, Teks Justified (Rata Kiri Kanan)." }] 
                    }
                })
            });

            if (response.status === 429) {
                window.showNotif("KUOTA KEY HABIS! Silakan ganti dengan API Key cadangan.", true);
                setTimeout(() => window.lockSystem(), 3000);
                return null;
            }
            
            if (!response.ok) throw new Error("API Failure");
            return await response.json();
        };

        // SYSTEM SECURITY LOGIC
        window.unlockSystem = async () => {
            const key = document.getElementById('input-gate-key').value.trim();
            if (!key) return;
            const btn = document.getElementById('btn-unlock');
            const errorEl = document.getElementById('gate-error');
            
            btn.disabled = true; btn.innerText = "Memvalidasi Online...";
            errorEl.classList.add('hidden-element');

            try {
                // Online validation check
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}`);
                const data = await res.json();

                if (data.models && data.models.length > 0) {
                    window.geminiApiKey = key;
                    document.getElementById('api-gate').classList.add('hidden-element');
                    document.getElementById('main-wrapper').classList.remove('hidden-element');
                    window.showNotif("Otorisasi Berhasil. Selamat Datang, Chief.");
                    initApp();
                } else {
                    throw new Error("Invalid");
                }
            } catch {
                errorEl.innerText = "Akses Ditolak: API Key tidak valid atau sudah mati.";
                errorEl.classList.remove('hidden-element');
                btn.disabled = false; btn.innerText = "Buka Dashboard Elit";
            }
        };

        window.lockSystem = () => { 
            window.geminiApiKey = ""; 
            location.reload(); 
        };

        window.toggleTutorial = () => document.getElementById('api-tutorial').classList.toggle('hidden-element');

        function initApp() {
            const nav = document.getElementById('sidebar-nav'); nav.innerHTML = '';
            toolCategories.forEach(cat => {
                const t = document.createElement('div'); t.className = 'text-[10px] font-black text-zinc-600 uppercase tracking-[0.3em] mb-4 mt-10 px-6';
                t.innerText = cat.name; nav.appendChild(t);
                cat.tools.forEach(tool => {
                    const btn = document.createElement('button');
                    btn.className = `nav-item w-full flex items-center gap-4 px-6 py-4 text-[14px] text-zinc-400 group rounded-xl mb-1 transition-all`;
                    btn.id = `nav-${tool.id}`; btn.onclick = () => selectTool(tool.id);
                    btn.innerHTML = `<i data-lucide="${tool.icon}" class="w-4 h-4"></i><span class="font-bold tracking-tight">${tool.name}</span>`;
                    nav.appendChild(btn);
                });
            });
            selectTool(toolCategories[0].tools[0].id);
        }

        function selectTool(id) {
            const tool = toolCategories.flatMap(c => c.tools).find(t => t.id === id);
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if (document.getElementById(`nav-${id}`)) document.getElementById(`nav-${id}`).classList.add('active');
            
            document.getElementById('active-tool-title').innerText = tool.name;
            document.getElementById('result-container').classList.add('hidden-element');

            document.getElementById('tool-interface').innerHTML = `
                <div class="mb-12">
                    <h2 class="luxury-font text-3xl md:text-4xl text-white mb-3 italic font-bold tracking-tight">${tool.name}</h2>
                    <p class="text-zinc-400 text-lg opacity-90 leading-relaxed max-w-2xl">${tool.desc}</p>
                </div>
                <div class="space-y-10">
                    ${tool.inputs.map(i => `
                        <div class="group">
                            <label class="block text-[12px] font-bold text-white uppercase tracking-[0.4em] mb-4 group-focus-within:text-amber-400 transition-colors">${i.label}</label>
                            ${i.type === 'textarea' ? `<textarea id="${i.id}" placeholder="${i.placeholder}" class="p-8 rounded-2xl h-56 transition-all text-lg"></textarea>` : 
                              i.type === 'select' ? `<select id="${i.id}" class="p-8 rounded-2xl appearance-none cursor-pointer text-lg">${i.options.map(o => `<option value="${o}">${o}</option>`).join('')}</select>` : 
                              `<input type="text" id="${i.id}" placeholder="${i.placeholder}" class="p-8 rounded-2xl transition-all text-lg">`}
                        </div>`).join('')}
                    <button onclick="window.executeAI('${tool.id}')" id="generate-btn" class="neural-btn w-full py-8 rounded-3xl flex items-center justify-center gap-6 text-sm">
                        <span>Deploy Strategic Command</span><i data-lucide="zap" class="w-5 h-5"></i>
                    </button>
                </div>`;
            if (window.lucide) window.lucide.createIcons();
            document.getElementById('main-scroll-area').scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.executeAI = async (toolId) => {
            if (isLoadingAI) return;
            const tool = toolCategories.flatMap(c => c.tools).find(t => t.id === toolId);
            const data = {}; let valid = true;
            tool.inputs.forEach(i => { const el = document.getElementById(i.id); if (!el || !el.value.trim()) valid = false; else data[i.id] = el.value.trim(); });
            if (!valid) return window.showNotif("Harap isi semua kolom terlebih dahulu.", true);

            isLoadingAI = true; const btn = document.getElementById('generate-btn'); btn.disabled = true; btn.innerHTML = `MENGANALISA STRATEGI...`;
            try {
                const res = await callGeminiAI(tool.prompt(data), window.geminiApiKey);
                if (res && res.candidates) {
                    const output = res.candidates[0].content.parts[0].text;
                    document.getElementById('result-content').innerHTML = window.marked.parse(output);
                    document.getElementById('result-container').classList.remove('hidden-element');
                    document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
                }
            } catch { window.showNotif("Sinkronisasi Gagal.", true); }
            finally { isLoadingAI = false; if(btn) { btn.disabled = false; btn.innerHTML = `<span>Deploy Strategic Command</span><i data-lucide="zap" class="w-5 h-5"></i>`; } if (window.lucide) window.lucide.createIcons(); }
        };

        window.copyResult = () => {
            const t = document.getElementById('result-content').innerText; const el = document.createElement('textarea');
            el.value = t; document.body.appendChild(el); el.select(); document.execCommand('copy');
            document.body.removeChild(el); window.showNotif("Strategi Berhasil Disalin.");
        };

        window.exportToWord = () => {
            const content = document.getElementById('result-content').innerHTML.replace(/<code>|<\/code>/g, '');
            const toolName = document.getElementById('active-tool-title').innerText;
            const header = `<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><style>@page { size: 21cm 29.7cm; margin: 2.5cm; } body { font-family: 'Calibri', sans-serif; color: #1a1a1a; } p, li { text-align: justify; line-height: 1.6; margin-bottom: 12pt; font-size: 11pt; } h1 { color: #D4AF37; text-align: center; border-bottom: 2px solid #D4AF37; padding-bottom: 10px; font-size: 24pt; } h2 { color: #333; margin-top: 20pt; border-bottom: 1px solid #eee; } table { border-collapse: collapse; width: 100%; margin: 15pt 0; } th { background-color: #f2f2f2; border: 1px solid #999; padding: 8pt; font-weight: bold; } td { border: 1px solid #999; padding: 8pt; vertical-align: top; }</style></head><body><h1>SOCIAL MEDIA SPECIALIST</h1><h2>${toolName.toUpperCase()}</h2>${content}</body></html>`;
            const blob = new Blob(['\ufeff', header], { type: 'application/msword' });
            const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = `Strategi_${toolName.replace(/\s+/g, '_')}.doc`;
            link.click(); window.showNotif("Simpan Word Berhasil.");
        };

        window.showNotif = (m, e = false) => {
            const n = document.getElementById('notification'); document.getElementById('notification-text').innerText = m;
            n.classList.remove('translate-y-40', 'opacity-0'); n.classList.add('translate-y-0', 'opacity-100');
            if (e) n.classList.add('border-red-500/50'); else n.classList.remove('border-red-500/50');
            setTimeout(() => { n.classList.add('translate-y-40', 'opacity-0'); }, 4000);
        };

        window.onload = () => {
            document.getElementById('neural-preloader').style.opacity = '0';
            setTimeout(() => document.getElementById('neural-preloader').style.display = 'none', 500);
            if (window.lucide) window.lucide.createIcons();
        };
    </script>
</body>
</html>
